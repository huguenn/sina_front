<div class="row message">
  <div class="container">
    <ngb-alert *ngIf="successMessage" (click)="alertClicked()" type="success" (close)="alertClicked();">
      <i class="fa fa-check-circle fa-3x" aria-hidden="true"></i> {{ successMessage }}
      <button class="actionButton transparentButton" [routerLink]="['/compra/carrito']">VER TODOS</button>
    </ngb-alert>
  </div>
</div>
<div class="row" style="background: #f8f8f8; margin: 0;">
  <div class="container">
    <div class="row cuerpo">
      <div class="tab">
        <div class="tab__header">
          <p>Bienvenido/a {{DatosUsuario.razonSocial}}</p>
          <ul>
            <li [class.active]="transaccion.check(i)"
              (click)="cambioTab(i)"
              *ngFor="let item of ListaItems; let i = index"
              ><i class="fa fa-{{item.icon}}" aria-hidden="true"></i>
              <span>{{item.texto}}</span>
            </li>
          </ul>
        </div>
          <div class="tab__content">
            <!-- Mi cuenta Tab -->
            <div class="tab__item" *ngIf="transaccion.paso === 0">
                <div class="content">
                  <div class="row tab__item__header show__desktop">
                      <p>Tu número de Cliente es {{DatosUsuario.codigo}}</p>
                      <p>{{ListaItems[transaccion.paso].texto}}</p>
                  </div>
                  <div class="row tab__item__header show__mobile">
                      <p>Nº de Cliente: {{DatosUsuario.codigo}}</p>
                      <p>{{ListaItems[transaccion.paso].texto}}</p>
                  </div>
                  <div class="row">
                    <div class="col-md-9 col-xs-12">
                      <div class="oferta">
                        <div class="border">
                          <h2 style="font-weight: bold;">¡OFERTA!</h2>
                          <h2>RECOMENDADA PARA VOS!</h2>
                        </div>
                        <div class="content">
                            <h2>{{DatosUsuario.razonSocial}}</h2>
                            <h3>Numero de Cliente: {{DatosUsuario.codigo}}</h3>
                            <div class="detalle">
                              <p>{{DatosUsuario.categoriaIva}}</p>
                              <p>CUIL {{DatosUsuario.cuit}}</p>
                            </div>
                            <img [ngClass]="'lazyload'" data-src="./assets/images/producto/1.webp" alt="" />
                            <span>Escobón Escobillón Sina®</span>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-3  col-xs-12 columnaSide">
                      <div class="side">
                        <button type="button" class="whiteButton blueButton" routerLink="/como-comprar">
                          <p style="margin: auto;">¿COMO COMPRAR?</p>
                        </button>
                        <button (click)="descargarLista()" class="whiteButton">
                          <i class="fa fa-download" aria-hidden="true"></i>
                          <p>LISTA DE PRECIOS</p>
                        </button>
                        <button (click)="descargarListaFrecuentes()" class="whiteButton">
                          <i class="fa fa-download" aria-hidden="true"></i>
                          <p>LISTA FRECUENTES</p>
                        </button>
            						<div class="text-center" id="loaderFile" style="display:none;">
            							<span style="color:#0579ff; font-size:11px;">Generando archivo</span>
            							<span style="color:#0579ff; font-size:11px;">Por favor espere...</span>
            							<div><img [ngClass]="'lazyload'" data-src="./assets/images/loader/ajax-loader.gif" /></div>
            						</div>
                        <ul>
                          <li *ngFor="let item of ListaItems; let i = index" [class.active]="transaccion.check(i)" (click)="cambioTab(i)">
                            <div class="list">
                              <div class="img"><img [ngClass]="'lazyload'" [attr.data-src]="item.model" alt=""></div>
                              <p>
                                {{item.texto}}
                              </p>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
            <!-- Mis Datos Tab -->
            <div class="tab__item" *ngIf="transaccion.paso === 1">
              <div class="content">
                <div class="row tab__item__header show__desktop">
                    <p>Tu número de Cliente es {{DatosUsuario.codigo}}</p>
                    <p>{{ListaItems[transaccion.paso].texto}}</p>
                </div>
                <div class="row tab__item__header show__mobile">
                    <p>Nº de Cliente: {{DatosUsuario.codigo}}</p>
                    <p>{{ListaItems[transaccion.paso].texto}}</p>
                </div>
                <div class="row">
                  <div class="col-md-9 col-xs-12">
                    <ngb-accordion #acc="ngbAccordion" activeIds="datos0">
                      <ngb-panel id="datos0">
                        <ng-template ngbPanelTitle>
                          <div class="header">
                            Datos fiscales <span>&#x25bc;</span>
                          </div>
                        </ng-template>
                        <ng-template ngbPanelContent >
                          <div class="form-group row">
                            <label for="example-text-input" class="col-xs-3 col-form-label">
                                Razon social
                            </label>
                            <div class="col-xs-9">
                              <input disabled class="form-control" type="text" name="razon_social" aria-label="Razon Social" [ngModel]="DatosUsuario.razonSocial" >
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="example-text-input" class="col-xs-3 col-form-label">
                                Nombre comercial
                            </label>
                            <div class="col-xs-9">
                              <input class="form-control" type="text" name="nombre_fantasia" aria-label="Nombre Comercial" [(ngModel)]="DatosUsuario.nombreFantasia">
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="example-text-input" class="col-xs-3 col-form-label">
                                CUIT/DNI
                            </label>
                            <div class="col-xs-9">
                              <input disabled class="form-control" type="text" name="cuit" aria-label="CUIT" [ngModel]="DatosUsuario.cuit">
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="example-text-input" class="col-xs-3 col-form-label">
                                Email
                            </label>
                            <div class="col-xs-9">
                              <input disabled class="form-control" type="text" name="email" aria-label="Email" [ngModel]="DatosUsuario.email">
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="example-text-input" class="col-xs-3 col-form-label">
                                Categoria IVA
                            </label>
                            <div class="col-xs-9">
                                <ng-select #responsable labelForId="responsable_value" style="max-height: 32px; margin: 6px 0px;"
                                  [clearable]="true"
                                  (change)="refreshCategoria($event)"
                                  ng-model="DatosUsuario.codCategoriaIva"
                                  placeholder="Categoria IVA">
                                  <ng-option *ngFor="let cat of data.reponsable_lista" [value]="cat.codigo">
                                    {{cat.text}}
                                  </ng-option>
                                </ng-select>
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="example-text-input" class="col-xs-3 col-form-label">
                                Telefono
                            </label>
                            <div class="col-xs-9">
                              <input class="form-control" type="text" value="{{DatosUsuario.telefono}}" [(ngModel)]="DatosUsuario.telefono" aria-label="Telefono">
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="example-text-input" class="col-xs-3 col-form-label">
                                Tel Alternativo
                            </label>
                            <div class="col-xs-9">
                              <input class="form-control" type="text" value="{{DatosUsuario.telefonoCelular}}" [(ngModel)]="DatosUsuario.telefonoCelular" aria-label="Telefono Alternativo">
                            </div>
                          </div>
                        <div class="form-group row">
                              <label for="example-text-input" class="col-xs-3 col-form-label">
                                  Direccion
                              </label>
                              <div class="col-xs-9">
                                <input class="form-control" type="text" name="domicilio_direccion" [(ngModel)]="DatosUsuario.domicilio.direccion" aria-label="Domicilio Calle">
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="example-text-input" class="col-xs-3 col-form-label">
                                  Localidad
                              </label>
                              <div class="col-xs-9">
                                <input class="form-control" type="text" name="domicilio_ciudad" [(ngModel)]="DatosUsuario.domicilio.ciudad" aria-label="Domicilio Ciudad">
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="example-text-input" class="col-xs-3 col-form-label">
                                  Provincia
                              </label>
                              <div class="col-xs-9">
                                <ng-select #provincia_value labelForId="provincia_value" style="max-height: 32px; margin: 6px 0px;"
                                  [clearable]="true"
                                  (change)="refreshProvincia($event)"
                                  ng-model="DatosUsuario.domicilio.provincia"
                                  placeholder="Provincia"
                                >
                                  <ng-option *ngFor="let prov of provincia_lista" [value]="prov.id">
                                    {{prov.text}}
                                  </ng-option>
                                </ng-select>
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="example-text-input" class="col-xs-3 col-form-label">
                                  Codigo postal
                              </label>
                              <div class="col-xs-9">
                                <input class="form-control" type="text" name="domicilio_codigo_postal" [(ngModel)]="DatosUsuario.domicilio.codPostal" aria-label="Domicilio Codigo Postal">
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="example-text-input" class="col-xs-3 col-form-label">
                                  Responsable compras
                              </label>
                              <div class="col-xs-9">
                                <input class="form-control" type="text" name="nombreResponsableFacturacion" [(ngModel)]="DatosUsuario.nombreResponsableFacturacion" aria-label="Nombre Responsable Facturacion">
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="example-text-input" class="col-xs-3 col-form-label">
                                  Email facturacion
                              </label>
                              <div class="col-xs-9">
                                <input class="form-control" type="text" name="emailFacturacion" [(ngModel)]="DatosUsuario.emailFacturacion" aria-label="Facturacion Email">
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="example-text-input" class="col-xs-3 col-form-label">
                                  Telefono facturacion
                              </label>
                              <div class="col-xs-9">
                                <input class="form-control" type="text" name="telefonoFacturacion" [(ngModel)]="DatosUsuario.telefonoFacturacion" aria-label="Facturacion Telefono">
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="example-text-input" class="col-xs-3 col-form-label">
                                  Breve Descripcion
                              </label>
                              <div class="col-xs-9">
                                <input class="form-control" type="text" name="descripcion" [(ngModel)]="DatosUsuario.descripcion" aria-label="Breve Descripcion Actividad">
                              </div>
                            </div>
                          </ng-template>
                      </ngb-panel>
                      <ngb-panel id="datos0">
                        <ng-template ngbPanelTitle>
                          <div class="header">
                            Datos de entrega <span>&#x25bc;</span>
                          </div>
                        </ng-template>
                        <ng-template ngbPanelContent *ngFor="let item of datosFiscales">
                        <div class="form-group row">
                              <label for="example-text-input" class="col-xs-3 col-form-label">
                                  Direccion
                              </label>
                              <div class="col-xs-9">
                                <input class="form-control" type="text" name="entrega_domicilio_direccion" aria-label="Domicio Entrega Calle" [(ngModel)]="DatosUsuario.datosEnvio.domicilioEntrega.direccion">
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="example-text-input" class="col-xs-3 col-form-label">
                                  Localidad
                              </label>
                              <div class="col-xs-9">
                                <input class="form-control" type="text" name="entrega_domicilio_ciudad" aria-label="Domicilio Entrega Ciudad" [(ngModel)]="DatosUsuario.datosEnvio.domicilioEntrega.ciudad">
                              </div>
                            </div>
                              <div class="form-group row">
                                <label for="example-text-input" class="col-xs-3 col-form-label">
                                    Provincia
                                </label>
                                <div class="col-xs-9">
                                  <ng-select #provincia_value2 labelForId="provincia_value2" style="max-height: 32px; margin: 6px 0px;"
                                    [clearable]="true"
                                    (change)="refreshProvincia2($event)"
                                    ng-model="DatosUsuario.datosEnvio.domicilioEntrega.provincia"
                                    placeholder="Provincia"
                                  >
                                    <ng-option *ngFor="let prov of provincia_lista" [value]="prov.id">
                                      {{prov.text}}
                                    </ng-option>
                                  </ng-select>
                                </div>
                              </div>
                              <div class="form-group row">
                                <label for="example-text-input" class="col-xs-3 col-form-label">
                                    Cod. Postal
                                </label>
                                <div class="col-xs-9">
                                  <input class="form-control" type="text" name="entrega_domicilio_codPostal" aria-label="Domicilio Entrega Codigo Postal" [(ngModel)]="DatosUsuario.datosEnvio.domicilioEntrega.codPostal">
                                </div>
                              </div>
                              <div class="form-group row">
                                <label for="example-text-input" class="col-xs-3 col-form-label">
                                    Telefono
                                </label>
                                <div class="col-xs-9">
                                  <input class="form-control" type="text" name="entrega_domicilio_telefono" aria-label="Domicilio Entrega Telefono" [(ngModel)]="DatosUsuario.datosEnvio.telefono">
                                </div>
                              </div>
                              <div class="form-group row">
                                <label for="example-text-input" class="col-xs-3 col-form-label">
                                    Transporte
                                </label>
                                <div class="col-xs-9">
                                    <ng-select #transporte labelForId="transporte" style="max-height: 32px; margin: 6px 0px;"
                                      [clearable]="true"
                                      (change)="refreshTransporte($event)"
                                      ng-model="DatosUsuario.datosEnvio.codigoTransporte"
                                      placeholder="Medio de transporte">
                                      <ng-option *ngFor="let transporte of transporte_lista" [value]="transporte.id">
                                        {{transporte.text}}
                                      </ng-option>
                                    </ng-select>
                                </div>
                              </div>
                              <div class="form-group row" style="margin-top: 10px; margin-bottom: 10px;">
                                <label for="example-text-input" class="col-xs-3 col-form-label" style="margin-top: -8px;">
                                  Días que recibe mercadería
                                </label>
                                <div class="col-xs-9" style="padding-top: 5px; padding-bottom: 5px;">
                                  <div class="check_dia_entrega">
                                    <label for="entrega_lunes" class="show__desktop_inline" style="font-weight: normal;">Lunes:</label>
                                    <label for="entrega_lunes" class="show__mobile_inline" style="font-weight: normal;">Lu:</label>
                                    <input type="checkbox" name="entrega_lunes" aria-label="Dias que recibe mercaderia Lunes" [(ngModel)]="DatosUsuario.datosEnvio.entregaLunes">
                                  </div>
                                  <div class="check_dia_entrega">
                                    <label for="entrega_martes" class="show__desktop_inline" style="font-weight: normal;">Martes:</label>
                                    <label for="entrega_martes" class="show__mobile_inline" style="font-weight: normal;">Ma:</label>
                                    <input type="checkbox" name="entrega_martes" aria-label="Dias que recibe mercaderia Martes" [(ngModel)]="DatosUsuario.datosEnvio.entregaMartes">
                                  </div>
                                  <div class="check_dia_entrega">
                                    <label for="entrega_miercoles" class="show__desktop_inline" style="font-weight: normal;">Miércoles:</label>
                                    <label for="entrega_miercoles" class="show__mobile_inline" style="font-weight: normal;">Mi:</label>
                                    <input type="checkbox" name="entrega_miercoles" aria-label="Dias que recibe mercaderia Miercoles" [(ngModel)]="DatosUsuario.datosEnvio.entregaMiercoles">
                                  </div>
                                </div>
                                <div class="col-xs-9" style="float: right; padding-top: 5px; padding-bottom: 5px;">
                                  <div class="check_dia_entrega">
                                    <label for="entrega_jueves" class="show__desktop_inline" style="font-weight: normal;">Jueves:</label>
                                    <label for="entrega_jueves" class="show__mobile_inline" style="font-weight: normal;">Ju:</label>
                                    <input type="checkbox" name="entrega_jueves" aria-label="Dias que recibe mercaderia Jueves" [(ngModel)]="DatosUsuario.datosEnvio.entregaJueves">
                                  </div>
                                  <div class="check_dia_entrega">
                                    <label for="entrega_viernes" class="show__desktop_inline" style="font-weight: normal;">Viernes:</label>
                                    <label for="entrega_viernes" class="show__mobile_inline" style="font-weight: normal;">Vi:</label>
                                    <input type="checkbox" name="entrega_viernes" aria-label="Dias que recibe mercaderia Viernes" [(ngModel)]="DatosUsuario.datosEnvio.entregaViernes">
                                  </div>
                                  <div class="check_dia_entrega">
                                    <label for="entrega_sabado" class="show__desktop_inline" style="font-weight: normal;">Sábado:</label>
                                    <label for="entrega_sabado" class="show__mobile_inline" style="font-weight: normal;">Sá:</label>
                                    <input type="checkbox" name="entrega_sabado" aria-label="Dias que recibe mercaderia Sabado" [(ngModel)]="DatosUsuario.datosEnvio.entregaSabado">
                                  </div>
                                </div>
                              </div>
                              <div class="form-group row">
                                <label for="example-text-input" class="col-xs-3 col-form-label" style="margin-top: -5px;">
                                  Horario Entrega
                                </label>
                                <div class="col-xs-9">
                                  <input class="form-control" type="text" name="entrega_horario" aria-label="Horario de entrega" [(ngModel)]="DatosUsuario.datosEnvio.horarioEntrega">
                                </div>
                              </div>
                          </ng-template>
                      </ngb-panel>
                    </ngb-accordion>
                    <div class="row" *ngIf="procesando_info_ok || procesando_info_entrega_ok">
                      <p style="color: #057aff;">{{procesando_info_ok}}</p>
                      <p style="color: #057aff;">{{procesando_info_entrega_ok}}</p>
                    </div>
                    <div class="row" *ngIf="!procesando_info_entrega && !procesando_info_entrega">
                      <p style="color: red;">{{procesando_info_error}}</p>
                      <p style="color: red;">{{procesando_info_entrega_error}}</p>
                      <button (click)="guardarDatos()" class="actionButton" style="float: right;">GUARDAR</button>
                    </div>
                  </div>
                  <div class="col-md-3  col-xs-12 columnaSide">
                    <div class="side">
                      <button type="button" class="whiteButton blueButton"routerLink="/como-comprar">
                        <p style="margin: auto;">¿COMO COMPRAR?</p>
                      </button>
                      <button (click)="descargarLista()" class="whiteButton">
                        <i class="fa fa-download" aria-hidden="true"></i>
                        <p>LISTA DE PRECIOS</p>
						          </button>
                      <button (click)="descargarListaFrecuentes()" class="whiteButton">
                        <i class="fa fa-download" aria-hidden="true"></i>
                        <p>LISTA FRECUENTES</p>
                      </button>
                      <div class="text-center" id="loaderFile" style="display:none;">
                        <span style="color:#0579ff; font-size:11px;">Generando archivo</span>
                        <span style="color:#0579ff; font-size:11px;">Por favor espere...</span>
                        <div><img [ngClass]="'lazyload'" data-src="./assets/images/loader/ajax-loader.gif" /></div>
                      </div>
                      <ul>
                        <li *ngFor="let item of ListaItems; let i = index" [class.active]="transaccion.check(i)" (click)="cambioTab(i)">
                          <div class="list">
                            <div class="img"><img [ngClass]="'lazyload'" [attr.data-src]="item.model" alt=""></div>
                            <p>
                              {{item.texto}}
                            </p>
                          </div>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Mis Frecuentes Tab -->
            <div class="tab__item" *ngIf="transaccion.paso === 2">
              <div class="content">
                <div class="row tab__item__header show__desktop">
                    <p>Tu número de Cliente es {{DatosUsuario.codigo}}</p>
                    <p>{{ListaItems[transaccion.paso].texto}}</p>
                </div>
                <div class="row tab__item__header show__mobile">
                    <p>Nº de Cliente: {{DatosUsuario.codigo}}</p>
                    <p>{{ListaItems[transaccion.paso].texto}}</p>
                </div>

                <div class="row">
                  <div class="col-md-9 col-xs-12">
                    <div class="row">
                      <h3 class="misFrecuentesTitle">MIS ARTICULOS MAS COMPRADOS</h3>
                    </div>
                    <div class="row" *ngIf="comprados?.length > 0">
                      <div class="misFrecuentes">
                        <div class="row misFrecuentesHeader">
                            <div class="col-1"><div class="border">Cantidad</div></div>
                            <div class="col-2"><div class="border">Descripcion</div></div>
                            <!-- <div class="grupo"> -->
                              <div class="col-3"><div class="border">Precio Unitario</div></div>
                              <div class="col-4"><div class="border">Subtotal</div></div>
                              <div class="col-5"></div>
                            <!-- </div> -->
                        </div>
                        <div class="row misFrecuentesRow" *ngFor="let item of comprados">
                          <div class="col-1">
                            <input *ngIf="item.cantPack === '1'" name="cantidad" aria-label="Cantidad" type="number" min="1" max="999999" [(ngModel)]="item.cantidad" (keyup)="revisarCantidad($event)">
                            <select *ngIf="item.cantPack !== '1'" name="cantidad" aria-label="Cantidad" [(ngModel)]="item.cantidad">
                              <option *ngFor="let cant of item.arrayCants" [ngValue]="cant">{{cant}}</option>
                            </select>
                          </div>
                          <div class="col-2">
                            <p class="misFrecuentesDescripcion">{{item.titulo}}</p>
                          </div>
                          <!-- <div class="grupo"> -->
                            <div class="col-3">
                              <p>${{formatMoney(item.precio)}}</p>
                            </div>
                            <div class="col-4">
                              <p>${{formatMoney(item.precio * (+item.cantidad))}}</p>
                            </div>
                            <div class="col-5" style="margin-top: -7px;">
                              <button *ngIf="!item.comprado" class="whiteButton" (click)="newMessage(item)">AGREGAR</button>
                              <button *ngIf="item.comprado" class="whiteButton" (click)="removeMessage(item)">AGREGADO</button>
                            </div>
                          <!-- </div> -->
                        </div>
                    </div>
                    </div>
                    <div class="row descarga" *ngIf="comprados?.length > 0">
                        <div class="col-md-9 col-xs-12">
                          <p>{{iva_usuario}}</p>
                        </div>
                        <div class="col-md-3 col-xs-12">
                          <button (click)="descargarLista()" class="whiteButton">
                            <i class="fa fa-download" aria-hidden="true"></i>
                            <p>LISTA DE PRECIOS</p>
                          </button>
                          <button (click)="descargarListaFrecuentes()" class="whiteButton">
                            <i class="fa fa-download" aria-hidden="true"></i>
                            <p>LISTA FRECUENTES</p>
                          </button>
                          <div class="text-center" id="loaderFile" style="display:none;">
                            <span style="color:#0579ff; font-size:11px;">Generando archivo</span>
                            <span style="color:#0579ff; font-size:11px;">Por favor espere...</span>
                            <div><img [ngClass]="'lazyload'" data-src="./assets/images/loader/ajax-loader.gif" /></div>
                          </div>
                        </div>
                    </div>
                    <div class="row" *ngIf="!comprados?.length">
                      <h3 class="misFrecuentesTitle">TODAVIA NO HAY ARTICULOS PARA MOSTRAR</h3>
                    </div>
                  </div>
                  <div class="col-md-3  col-xs-12 columnaSide">
                    <div class="side">
                      <button type="button" class="whiteButton blueButton" routerLink="/como-comprar">
                        <p style="margin: auto;">¿COMO COMPRAR?</p>
                      </button>
                      <button (click)="descargarLista()" class="whiteButton">
                        <i class="fa fa-download" aria-hidden="true"></i>
                        <p>LISTA DE PRECIOS</p>
                      </button>
                      <button (click)="descargarListaFrecuentes()" class="whiteButton">
                        <i class="fa fa-download" aria-hidden="true"></i>
                        <p>LISTA FRECUENTES</p>
                      </button>
                      <div class="text-center" id="loaderFile" style="display:none;">
                        <span style="color:#0579ff; font-size:11px;">Generando archivo</span>
                        <span style="color:#0579ff; font-size:11px;">Por favor espere...</span>
                        <div><img [ngClass]="'lazyload'" data-src="./assets/images/loader/ajax-loader.gif" /></div>
                      </div>
                      <ul>
                        <li *ngFor="let item of ListaItems; let i = index" [class.active]="transaccion.check(i)" (click)="cambioTab(i)">
                          <div class="list">
                            <div class="img"><img [ngClass]="'lazyload'" [attr.data-src]="item.model" alt=""></div>
                            <p>
                              {{item.texto}}
                            </p>
                          </div>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Mi ultima compra Tab -->
            <div class="tab__item ultimaCompra" *ngIf="transaccion.paso === 3">
              <div class="content">
                <div class="row tab__item__header show__desktop">
                    <p>Tu número de Cliente es {{DatosUsuario.codigo}}</p>
                    <p>{{ListaItems[transaccion.paso].texto}}</p>
                </div>
                <div class="row tab__item__header show__mobile">
                    <p>Nº de Cliente: {{DatosUsuario.codigo}}</p>
                    <p>{{ListaItems[transaccion.paso].texto}}</p>
                </div>
                <div class="row">
                  <div class="col-md-9 col-xs-12">
                    <ngb-accordion *ngIf="ultimasCompras?.length" #acc="ngbAccordion" closeOthers="true">
                        <ngb-panel *ngFor="let compra of ultimasCompras; let i = index" id="compra{{i}}">
                          <ng-template ngbPanelTitle>
                            <div class="header" style="font-weight: bold;">
                              Compra del {{compra.fechaPedido?.date.date}}/{{compra.fechaPedido?.date.month}}/{{compra.fechaPedido?.date.year}} <span style="color: #00c973;">Ver detalle &#x25BC;</span>
                            </div>
                          </ng-template>
                          <ng-template ngbPanelContent>
                              <div class="misFrecuentes" style="padding: 4px;">
                                  <div class="row misFrecuentesHeader">
                                    <div class="col-1"><div class="border">Cantidad</div></div>
                                    <div class="col-2"><div class="border">Descripcion</div></div>
                                    <!-- <div class="grupo"> -->
                                      <div class="col-3"><div class="border">Precio Unitario</div></div>
                                      <div class="col-4"><div class="border">Subtotal</div></div>
                                    <!-- </div> -->
                                  </div>
                                <div class="row misFrecuentesRow" *ngFor="let item of compra.items" style="padding-top: 4px;">
                                    <div class="col-1 sinPaddingLeftMobile">
                                      <p style="margin-left: 5px;"> {{item.cantidad}}</p>
                                    </div>
                                    <div class="col-2 sinPaddingLeftMobile">
                                      <p style="margin-left: 2px;" class="misFrecuentesDescripcion">{{item.producto.titulo}}</p>
                                    </div>
                                    <!-- <div class="grupo"> -->
                                      <div class="col-3">
                                        <p>${{formatMoney(item.producto.precio)}}</p>
                                      </div>
                                      <div class="col-4 sinPaddingLeftMobile">
                                        <p class="marginLeftMobile">${{formatMoney(item.subtotal)}}</p>
                                      </div>
                                    <!-- </div> -->
                                  </div>
                                  <div class="row misFrecuentesTotal">
                                    <div class="col-2" style="min-width: 90px;">
                                      <button class="actionButton" (click)="repetirPregunta(compra)" style="width: 50%;">REPETIR COMPRA</button>
                                      <!--<a href="#"> -->
                                      <a target="_blank" rel="noopener noreferrer" [href]="compra.urlPdf" *ngIf="compra.urlPdf">
                                        <button class="whiteButton" style="width: 50%; padding: 5px 10px;">
                                          VER PEDIDO
                                        </button>
                                      </a>
                                    </div>

                                    <div *ngIf="_existDesktop" class="col-1"></div>
                                    <div *ngIf="_existDesktop" class="col-3">
                                      <p style="margin-top: 16px; font-weight: bold;">Subtotal</p>
                                    </div>
                                    <div *ngIf="_existDesktop" class="col-4">
                                      <p style="margin-top: 10px;font-size: 20px; font-weight: bold;">${{formatMoney(compra.total)}}</p>
                                    </div>

                                    <div *ngIf="_existMobile" style="margin-left: 60%;">
                                      <p style="margin-top: 16px; font-weight: bold; font-size: 12px;">Subtotal</p>
                                    </div>
                                    <div *ngIf="_existMobile" style="margin-left: 60%;">
                                      <p style="margin-top: 10px;font-size: 16px; font-weight: bold;">${{formatMoney(compra.total)}}</p>
                                    </div>
                                  </div>
                              </div>
                          </ng-template>
                        </ngb-panel>
                    </ngb-accordion>
                    <div class="row" *ngIf="!ultimasCompras?.length">
                        <h3 class="misFrecuentesTitle">TODAVIA NO SE REGISTRAN COMPRAS ANTERIORES PARA MOSTRAR</h3>
                    </div>
                    <div *ngIf="repetirFlag" class="modal__container" (click)="closeRepetir($event)">
                        <div role="document" class="modal-dialog">
                          <div class="modal-content">
                          <div class="modal-header">
                          <h4 class="modal-title">REPETIR COMPRA</h4>
                          <button aria-label="Close" class="close" type="button">
                          <span aria-hidden="true" (click)= "transaccion.cambio(0)">×</span>
                          </button>
                          </div>
                          <div class="modal-body">
                          <p>Al repetir la compra se van a eliminar todos los productos actuales en el carrito y se van a agregar los de la anterior compra seleccionada. ¿Quiere proceder?</p>
                          </div>
                          <div class="modal-footer">
                              <button class="actionButton" type="button" (click)= "repetirCompra()">ACEPTAR</button>
                              <button class="whiteButton" type="button" (click)= "repetirCancelar()" >CANCELAR</button>
                            </div>
                          </div>
                          </div>
                    </div>
                  </div>
                  <div class="col-md-3  col-xs-12 columnaSide">
                    <div class="side">
                      <button type="button" class="whiteButton blueButton" routerLink="/como-comprar">
                        <p style="margin: auto;">¿COMO COMPRAR?</p>
                      </button>
                      <button (click)="descargarLista()" class="whiteButton">
                        <i class="fa fa-download" aria-hidden="true"></i>
                        <p>LISTA DE PRECIOS</p>
                      </button>
                      <button (click)="descargarListaFrecuentes()" class="whiteButton">
                        <i class="fa fa-download" aria-hidden="true"></i>
                        <p>LISTA FRECUENTES</p>
                      </button>
                      <div class="text-center" id="loaderFile" style="display:none;">
                        <span style="color:#0579ff; font-size:11px;">Generando archivo</span>
                        <span style="color:#0579ff; font-size:11px;">Por favor espere...</span>
                        <div><img [ngClass]="'lazyload'" data-src="./assets/images/loader/ajax-loader.gif" /></div>
                      </div>
                      <ul>
                        <li *ngFor="let item of ListaItems; let i = index" [class.active]="transaccion.check(i)" (click)="cambioTab(i)">
                          <div class="list">
                            <div class="img"><img [ngClass]="'lazyload'" [attr.data-src]="item.model" alt=""></div>
                            <p>
                              {{item.texto}}
                            </p>
                          </div>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <br>
                  <div class="col-md-9 col-xs-12">
                    <p>{{iva_usuario}}</p>
                  </div>
                </div>
              </div>
            </div>
            <!-- Cerrar sesion Tab -->
            <div class="tab__item" *ngIf="transaccion.paso === 4">
                <div class="content">
                  <div class="row tab__item__header show__desktop">
                      <p>Tu número de Cliente es {{DatosUsuario.codigo}}</p>
                      <p>{{ListaItems[transaccion.paso].texto}}</p>
                  </div>
                  <div class="row tab__item__header show__mobile">
                      <p>Nº de Cliente: {{DatosUsuario.codigo}}</p>
                      <p>{{ListaItems[transaccion.paso].texto}}</p>
                  </div>
                  <div class="row">
                    <div class="col-md-9 col-xs-12">
                      <div class="modal__container" (click)="closeFull($event)">
                          <div role="document" class="modal-dialog">
                            <div class="modal-content">
                            <div class="modal-header">
                            <h4 class="modal-title">CERRAR SESIÓN</h4>
                            <button aria-label="Close" class="close" type="button">
                            <span aria-hidden="true" (click)= "transaccion.cambio(0)">×</span>
                            </button>
                            </div>
                            <div class="modal-body">
                            <p>¿Estas seguro que deseas cerrar sesión?</p>
                            </div>
                            <div class="modal-footer">
                                <button class="actionButton" type="button" (click)= "closeSession()" [routerLink]="['/']">ACEPTAR</button>
                                <button class="whiteButton" type="button" (click)= "transaccion.cambio(0)" >CANCELAR</button>
                              </div>
                            </div>
                            </div>
                      </div>
                    </div>
                    <div class="col-md-3  col-xs-12 columnaSide">
                      <div class="side">
                        <button type="button" class="whiteButton blueButton" routerLink="/como-comprar">
                          <p style="margin: auto;">¿COMO COMPRAR?</p>
                        </button>
                        <button (click)="descargarLista()" class="whiteButton">
                          <i class="fa fa-download" aria-hidden="true"></i>
                          <p>LISTA DE PRECIOS</p>
                        </button>
                        <button (click)="descargarListaFrecuentes()" class="whiteButton">
                          <i class="fa fa-download" aria-hidden="true"></i>
                          <p>LISTA FRECUENTES</p>
                        </button>
                        <div class="text-center" id="loaderFile" style="display:none;">
                          <span style="color:#0579ff; font-size:11px;">Generando archivo</span>
                          <span style="color:#0579ff; font-size:11px;">Por favor espere...</span>
                          <div><img [ngClass]="'lazyload'" data-src="./assets/images/loader/ajax-loader.gif" /></div>
                        </div>
                        <ul>
                          <li *ngFor="let item of ListaItems; let i = index" [class.active]="transaccion.check(i)" (click)="cambioTab(i)">
                            <div class="list">
                              <div class="img"><div class="img"><img [ngClass]="'lazyload'" [attr.data-src]="item.model" alt=""></div></div>
                              <p>
                                {{item.texto}}
                              </p>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
          </div>
        </div>
    </div>
  </div>
</div>
